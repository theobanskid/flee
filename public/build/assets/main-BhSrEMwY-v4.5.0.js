import{l as a}from"./lodash-DrKONiQm-v4.5.0.js";import"./CartItem-HYQyFSGT-v4.5.0.js";import"./@popperjs-DMMwm23M-v4.5.0.js";Alpine.store("state",{cart:{...FleetCart.cart},wishlist:[...FleetCart.wishlist],compareList:[...FleetCart.compareList],coupon:{},loading:!1,get cartItems(){return this.cart.items},get cartQuantity(){return this.cart.quantity},get cartIsEmpty(){return Object.keys(this.cart.items).length===0},get cartSubTotal(){return this.cart.subTotal.inCurrentCurrency.formatted},get cartTotal(){return this.cart.total.inCurrentCurrency.formatted},get cartTotalAmount(){return this.cart.total.amount},get compareIsEmpty(){return this.compareList.length===0},get compareCount(){return this.compareList.length},get wishlistCount(){return this.wishlist.length},get hasCoupon(){return this.cart.coupon.code!==void 0},get getCoupon(){return this.cart.coupon.code},updateCart(e){this.cart={...e},this.setCoupon(e)},updateCartItemQty({id:e,qty:s}){this.cart.items[e].qty=s},removeCartItem(e){delete this.cart.items[e]},clearCart(){this.cart.items={}},setCoupon(e){e.coupon.code&&(this.cart.coupon=e.coupon)},inWishlist(e){return this.wishlist.includes(e)},syncWishlist(e){if(this.inWishlist(e)){this.removeFromWishlist(e);return}this.addToWishlist(e)},async addToWishlist(e){if(FleetCart.loggedIn){this.wishlist.push(e),await axios.post(route("account.wishlist.products.store"),{productId:e});return}window.location.href=route("login")},removeFromWishlist(e){this.wishlist.splice(this.wishlist.indexOf(e),1),axios.delete(route("account.wishlist.products.destroy",{product:e}))},inCompareList(e){return this.compareList.includes(e)},syncCompareList(e){if(this.inCompareList(e)){this.removeFromCompareList(e);return}this.addToCompareList(e)},addToCompareList(e){this.compareList.push(e),axios.post(route("compare.store"),{productId:e})},async removeFromCompareList(e){this.compareList.splice(this.compareList.indexOf(e),1),await axios.delete(route("compare.destroy",{productId:e}))}});Alpine.store("layout",{sidebarMenuOpen:!1,sidebarCartOpen:!1,sidebarFilterOpen:!1,localizationMenuOpen:!1,overlay:!1,get isOpenSidebarMenu(){return this.sidebarMenuOpen},get isOpenSidebarCart(){return this.sidebarCartOpen},get isOpenSidebarFilter(){return this.sidebarFilterOpen},get isOpenlocalizationMenu(){return this.localizationMenuOpen},openSidebarMenu(){this.sidebarMenuOpen=!0,this.showOverlay()},closeSidebarMenu(){this.sidebarMenuOpen=!1,this.hideOverlay()},openSidebarCart(){if(route().current("checkout.create")){window.location.href=route("cart.index");return}this.sidebarCartOpen=!0,this.showOverlay()},closeSidebarCart(){this.sidebarCartOpen=!1,this.hideOverlay()},openSidebarFilter(){this.sidebarFilterOpen=!0,this.showOverlay()},closeSidebarFilter(){this.sidebarFilterOpen=!1,this.hideOverlay()},openLocalizationMenu(){this.localizationMenuOpen=!0,this.showOverlay()},closeLocalizationMenu(){this.localizationMenuOpen=!1,this.hideOverlay()},showOverlay(){this.overlay=!0},hideOverlay(){this.overlay=!1}});Alpine.data("HeaderSearch",({categories:e,initialQuery:s,initialCategory:i})=>({categories:e,initialQuery:s,initialCategory:i,skeleton:!0,showMiniSearch:!1,activeSuggestion:null,showSuggestions:!1,form:{query:s,category:i},suggestions:{categories:[],products:[],remaining:0},get shouldShowSuggestions(){return this.showSuggestions?this.hasAnySuggestion:!1},get moreResultsUrl(){return this.form.category?route("categories.products.index",this.form):route("products.index",{query:this.form.query})},get hasAnySuggestion(){return this.suggestions.products.length!==0},get hasAnyCategorySuggestion(){return this.suggestions.categories.length!==0},get allSuggestions(){return[...this.suggestions.categories,...this.suggestions.products]},get firstSuggestion(){return this.allSuggestions[0]},get lastSuggestion(){return this.allSuggestions[this.allSuggestions.length-1]},init(){this.hideSkeleton(),this.$watch("form.query",a.throttle(t=>{t===""?this.clearSuggestions():(this.showSuggestions=!0,this.fetchSuggestions())},600)),this.$watch("showMiniSearch",t=>{if(t){this.$refs.miniSearchInput.focus();return}this.hideSuggestions()}),this.fetchSuggestions()},hideSkeleton(){setTimeout(()=>{this.skeleton=!1},100)},getCategoryNameBySlug(t){var r;return((r=this.categories.find(o=>o.slug===t))==null?void 0:r.name)||""},changeCategory(t=""){this.form.category=t,this.fetchSuggestions()},async fetchSuggestions(){if(this.form.query==="")return;const{data:t}=await axios.get(route("suggestions.index",this.form));this.clearActiveSuggestion(),this.resetSuggestionScrollBar(),this.suggestions.categories=t.categories,this.suggestions.products=t.products,this.suggestions.remaining=t.remaining},search(){if(this.form.query){if(this.activeSuggestion){window.location.href=this.activeSuggestion.url,this.hideSuggestions();return}if(this.form.category){window.location.href=route("categories.products.index",this.form);return}window.location.href=route("products.index",{query:this.form.query})}},showExistingSuggestions(){this.showSuggestions=!0},clearSuggestions(){this.suggestions.categories=[],this.suggestions.products=[]},hideSuggestions(){this.showSuggestions=!1,this.clearActiveSuggestion()},isActiveSuggestion(t){return this.activeSuggestion?this.activeSuggestion.slug===t.slug:!1},changeActiveSuggestion(t){this.activeSuggestion=t},clearActiveSuggestion(){this.activeSuggestion=null},nextSuggestion(){this.hasAnySuggestion&&(this.activeSuggestion=this.allSuggestions[this.nextSuggestionIndex()],this.activeSuggestion||(this.activeSuggestion=this.firstSuggestion),this.adjustSuggestionScrollBar())},prevSuggestion(){if(this.hasAnySuggestion){if(this.prevSuggestionIndex()===-1){this.clearActiveSuggestion();return}this.activeSuggestion=this.allSuggestions[this.prevSuggestionIndex()],this.activeSuggestion||(this.activeSuggestion=this.lastSuggestion),this.adjustSuggestionScrollBar()}},nextSuggestionIndex(){return this.currentSuggestionIndex()+1},prevSuggestionIndex(){return this.currentSuggestionIndex()-1},currentSuggestionIndex(){return this.allSuggestions.indexOf(this.activeSuggestion)},adjustSuggestionScrollBar(){const t=document.querySelector(`.search-suggestions-inner li[data-slug='${this.activeSuggestion.slug}']`);t&&(this.$refs.searchSuggestionsInner.scrollTop=t.offsetTop-200)},resetSuggestionScrollBar(){this.$refs.searchSuggestionsInner!==void 0&&(this.$refs.searchSuggestionsInner.scrollTop=0)},hasBaseImage(t){return t.base_image.length!==0},baseImage(t){return this.hasBaseImage(t)?t.base_image.path:`${window.FleetCart.baseUrl}/build/assets/image-placeholder.png`}}));Alpine.data("Header",()=>({stickyHeader:!1,showStickyHeader:!1,get isStickyHeader(){return this.stickyHeader},get isShowingStickyHeader(){return this.showStickyHeader},init(){this.toggleStickyHeader({delay:600}),this.addEventListeners()},toggleStickyHeader({delay:e}){const s=this.$refs.header;if(window.scrollY>s.offsetTop+s.offsetHeight){this.stickyHeader=!0,s.style.paddingTop=`${s.offsetHeight}px`,setTimeout(()=>{this.showStickyHeader=!0},e);return}this.stickyHeader=!1,this.showStickyHeader=!1,s.style.paddingTop="0px"},addEventListeners(){window.addEventListener("resize",()=>{this.toggleStickyHeader({delay:0})}),window.addEventListener("scroll",()=>{this.toggleStickyHeader({delay:0})})}}));Alpine.data("SidebarCart",()=>({get cartIsEmpty(){return this.$store.state.cartIsEmpty},clearCart(){this.$store.state.clearCart(),axios.delete(route("cart.clear")).then(({data:e})=>{this.$store.state.updateCart(e)}).catch(e=>{notify(e.response.data.message)})}}));Alpine.data("CookieBar",()=>({show:!1,init(){setTimeout(()=>{this.show=!0},1e3)},decline(){this.show=!1,axios.delete(route("storefront.cookie_bar.destroy"))},accept(){this.show=!1,axios.delete(route("storefront.cookie_bar.destroy"))}}));Alpine.data("NewsletterSubscription",()=>({email:"",subscribing:!1,subscribe(){!this.email||this.subscribing||(this.subscribing=!0,axios.post(route("subscribers.store"),{email:this.email}).then(()=>{this.email=""}).catch(e=>{if(e.response.status===422){notify(e.response.data.errors.email[0]);return}notify(e.response.data.message)}).finally(()=>{this.subscribing=!1}))}}));Alpine.data("NewsletterPopup",()=>({email:"",subscribing:!1,subscribed:!1,error:"",modal:bootstrap.Modal.getOrCreateInstance("#newsletterPopup"),init(){this.$watch("email",()=>{this.error=""}),this.showNewsletterPopup()},showNewsletterPopup(){setTimeout(()=>{this.modal.show()},2e3)},disableNewsletterPopup(){this.modal.hide(),axios.delete(route("storefront.newsletter_popup.destroy"))},subscribe(){this.subscribing||this.subscribed||(this.subscribing=!0,document.activeElement.blur(),axios.post(route("subscribers.store"),{email:this.email}).then(()=>{this.email="",this.subscribed=!0}).catch(e=>{if(e.response.status===422){this.error=e.response.data.errors.email[0],this.$refs.form.elements[0].focus();return}this.error=e.response.data.message}).finally(()=>{this.subscribing=!1}))}}));
