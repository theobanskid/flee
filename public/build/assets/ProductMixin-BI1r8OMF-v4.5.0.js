import{m as u}from"./blueimp-md5-CGBD6urz-v4.5.0.js";import{t as c}from"./wysiwyg-DCJeIrPg-v4.5.0.js";import{d as h}from"./vuedraggable-B-5FzsdF-v4.5.0.js";import{S as f}from"./vue2-selectize-C5lSWCkp-v4.5.0.js";import{f as p}from"./vue-flatpickr-component-w2ZiUwnG-v4.5.0.js";import{C as d}from"./@melloware-BTYRaMki-v4.5.0.js";import{n as m}from"./NProgress-CXAKYsrL-v4.5.0.js";import{t as g}from"./Toaster-C9daH-A8-v4.5.0.js";const v={data(){return{isLeftColumnSectionDragging:!1,isRightColumnSectionDragging:!1,formLeftSections:[],formRightSections:[]}},computed:{storeFormSections(){return{get:t=>this.getSectionOrder(t.options.dataName),set:t=>this.setSectionOrder(t)}}},created(){this.formLeftSections=this.getSectionOrder("product-form-left-sections"),this.formRightSections=this.getSectionOrder("product-form-right-sections")},methods:{getDefaultSectionOrder(t){return{"product-form-left-sections":["attributes","downloads","variations","variants","options"],"product-form-right-sections":["price","inventory","media","seo","additional","linked_products"]}[t]},getSectionOrder(t){const e=JSON.parse(localStorage.getItem(t));return e===null?this.getDefaultSectionOrder(t):e},setSectionOrder(t){this.$nextTick(()=>{localStorage.setItem(t.options.dataName,JSON.stringify(t.toArray()))})},notifySectionOrderChange(){toaster(trans("product::products.section.order_saved"),{type:"default"}),this.$nextTick(()=>{this.initColorPicker()})}}},V={watch:{"form.attributes":{immediate:!0,handler(t){t.length===0&&this.addAttribute()}}},methods:{prepareAttributes(t){t.forEach(e=>{this.$set(e,"uid",this.uid())})},getAttributeValuesById(t){let e=null,i=!1;if(t!=="")return Object.values(FleetCart.data["attribute-sets"]).some(s=>{if(s.attributes.some(a=>{if(a.id===t)return i=!0,e=a.values,!0}),i)return!0}),e},focusAttributeValueField(t){this.$refs.attributeValues[t].$el.selectize.focus()},addAttribute(){this.form.attributes.push({attribute_id:"",uid:this.uid(),values:[]})},deleteAttribute(t,e){this.form.attributes.splice(t,1),this.clearErrors({name:"attributes",uid:e})}}},E={data(){return{globalVariationId:"",addingGlobalVariation:!1,variations:[]}},computed:{isAddGlobalVariationDisabled(){return this.globalVariationId===""||this.addingGlobalVariation},isCollapsedVariationsAccordion(){return this.form.variations.every(({is_open:t})=>t===!1)}},watch:{"form.variations":{immediate:!0,handler(t){t.length===0&&this.addVariation({preventFocus:!0})}}},mounted(){this.initColorPicker(),this.hideColorPicker()},methods:{prepareVariations(t){t.forEach(e=>{this.$set(e,"is_open",!1)})},regenerateVariationsUid(){this.form.variations.forEach(t=>{this.$set(t,"uid",this.uid()),t.values.forEach((e,i)=>{this.$set(t.values[i],"uid",this.uid())})})},reorderVariations(){this.generateVariants(),this.notifyVariantsReordered()},reorderVariationValues(){this.generateVariants(!0)},addVariation({preventFocus:t}){const e=this.uid();this.form.variations.push({uid:e,type:"",is_global:!1,is_open:!0,values:[{uid:this.uid(),image:{id:null,path:null}}]}),t||this.focusField({selector:`#variations-${e}-name`})},deleteVariation(t,e){this.form.variations.splice(t,1),this.clearErrors({name:"variations",uid:e}),this.generateVariants()},changeVariationType(t,e,i){const s=this.form.variations[e];t!==""&&s.values.length===1&&this.focusField({selector:`#variations-${i}-values-${s.values[0].uid}-label`}),t==="text"?s.values.forEach(a=>{this.errors.clear([`variations.${i}.values.${a.uid}.color`,`variations.${i}.values.${a.uid}.image`])}):t==="color"?(s.values.forEach(a=>{this.errors.clear(`variations.${i}.values.${a.uid}.image`)}),this.$nextTick(()=>{this.initColorPicker()})):t==="image"?(s.values.forEach((a,r)=>{a.image||this.$set(s.values[r],"image",{id:null,path:null})}),s.values.forEach(a=>{this.errors.clear(`variations.${i}.values.${a.uid}.color`)})):this.clearValuesError(e,i)},chooseVariationImage(t,e,i,s){new MediaPicker({type:"image"}).on("select",({id:r,path:n})=>{this.form.variations[t].values[i].image={id:+r,path:n},this.errors.clear(`variations.${e}.values.${s}.image`)})},addVariationRow(t,e){const i=this.uid();this.form.variations[t].values.push({uid:i,image:{id:null,path:null}}),this.$nextTick(()=>{this.initColorPicker(),$(`#variations-${e}-values-${i}-label`).trigger("focus")})},addVariationRowOnPressEnter(t,e,i){const s=this.form.variations[e],a=s.values;if(t.target.value!==""){if(a.length-1===i){this.addVariationRow(e,s.uid);return}i<a.length-1&&$(`#variations-${s.uid}-values-${a[i+1].uid}-label`).trigger("focus")}},deleteVariationRow(t,e,i,s){const a=this.form.variations[t];a.values.splice(i,1),this.clearValueRowErrors({name:"variations",variationUid:e,valueUid:s}),a.values.length===0&&this.addVariationRow(t,e),this.generateVariants()},updateColorThumbnails(){this.form.variations.forEach(({uid:t,type:e,values:i})=>{if(e!=="color")return;const s=document.querySelectorAll(`.variation-${t} .clr-field`);i.forEach(({color:a},r)=>{s[r].style.color=a||""})})},initColorPicker(){d.init(),d({el:".color-picker",alpha:!1,rtl:FleetCart.rtl,theme:"large",wrap:!0,format:"hex",selectInput:!0,swatches:["#D01C1F","#3AA845","#118257","#0A33AE","#0D46A0","#000000","#5F4C3A","#726E6E","#F6D100","#C0E506","#FF540A","#C5A996","#4B80BE","#A1C3DA","#C8BFC2","#A9A270"]})},hideColorPicker(){$(document).on("click","#clr-swatches button",t=>{$(t.currentTarget).parents("#clr-picker").removeClass("clr-open")})},addGlobalVariation(){this.globalVariationId!==""&&(this.addingGlobalVariation=!0,$.ajax({type:"GET",url:route("admin.variations.show",this.globalVariationId),dataType:"json",success:t=>{t.uid=this.uid(),t.is_open=!0,t.values.forEach(e=>{e.uid=this.uid()}),this.form.variations.push(t),this.generateVariants(),this.$nextTick(()=>{$(`#variations-${t.uid}-name`).trigger("focus")})}}).catch(t=>{toaster(t.responseJSON.message,{type:"error"})}).always(()=>{this.globalVariationId="",this.addingGlobalVariation=!1}))}}},b={data(){return{defaultVariantUid:"",variantPosition:0,variantsLength:0}},computed:{hasAnyVariant(){return this.form.variants.length!==0},isCollapsedVariantsAccordion(){return this.form.variants.every(({is_open:t})=>t===!1)}},mounted(){this.hasAnyVariant&&this.setVariantsName()},methods:{prepareVariants(t){t.forEach(e=>{this.$set(e,"position",this.variantPosition++),this.$set(e,"is_open",!1),this.$set(e,"is_selected",!1)})},changeDefaultVariant(t){const e=this.form.variants,i=e.findIndex(s=>s.uid===t);if(e[i].is_active===!0){this.resetDefaultVariant(),this.defaultVariantUid=e[i].uid,this.$set(e[i],"is_default",!0);return}this.defaultVariantUid=this.defaultVariantUid},setDefaultVariant(){const t=this.form.variants,e=t.findIndex(({uid:s})=>s===this.defaultVariantUid);this.resetDefaultVariant();const i=t[e===-1?0:e];this.defaultVariantUid=i.uid,this.$set(i,"is_default",!0),e===-1&&(this.defaultVariantUid=t[0].uid,this.$set(t[0],"is_active",!0))},isActiveVariant(t){return this.form.variants[t].is_active},changeVariantStatus(t){if(this.defaultVariantUid===t){toaster(trans("product::products.variants.disable_default_variant"),{type:"default"});return}this.clearErrors({name:"variants",uid:t})},resetDefaultVariant(){this.form.variants.some(t=>{if(t.is_default===!0)return this.$set(t,"is_default",!1),!0})},getFilteredVariations(){return this.form.variations.map(({type:t,values:e})=>e.map(({uid:i,label:s})=>{if(t!==""&&s)return{uid:i,label:s}}).filter(Boolean)).filter(t=>t.length!==0)},generateNewVariants(t){return t.reduce((e,i)=>e.flatMap(s=>i.map(a=>({uid:s.uid+"."+a.uid,label:s.label+" / "+a.label})))).map(({uid:e,label:i})=>({uids:e.split(".").sort().join("."),name:i}))},setVariantsName(){this.generateNewVariants(this.getFilteredVariations()).forEach((t,e)=>{this.form.variants[e].name=t.name})},isEqualVariants(t,e){return t.map(({uids:i})=>i).toString()===e.map(({uids:i})=>i).toString()},generateVariants(t){this.$nextTick(()=>{this.initColorPicker(),this.updateColorThumbnails()});const e=this.getFilteredVariations();if(e.length===0){this.form.variants=[],this.variantsLength=0;return}const i=this.generateNewVariants(e),s=this.form.variants.map(({uids:a})=>({uids:a}));t===!0&&this.isEqualVariants(i,s)||(t===!0&&this.notifyVariantsReordered(),i.length>this.variantsLength?this.addVariants(i,s):i.length<this.variantsLength?this.removeVariants(i,s):i.length===this.variantsLength&&this.reorderVariants(i,s),this.variantsLength=i.length,this.setDefaultVariant())},addVariants(t,e){if(this.notifyVariantsCreated(t.length),e.length===0){t.forEach(s=>{this.form.variants.push(this.variantDefaultData(s))});return}if(this.hasCommonVariantUids(t,e)){const s=e.map(({uids:a})=>a);t.forEach((a,r)=>{s.includes(a.uids)||this.form.variants.splice(r,0,this.variantDefaultData(a))});return}const i=[];e.forEach(({uids:s})=>{t.forEach((a,r)=>{const n=s.split(".").every(o=>a.uids.split(".").includes(o));if(n&&!i.includes(s)){i.push(s),this.setVariantData(a,r);return}n&&this.form.variants.splice(r,0,this.variantDefaultData(a))})})},removeVariants(t,e){if(this.resetBulkEditVariantFields(),this.notifyVariantsRemoved(e.length-t.length),this.hasCommonVariantUids(t,e)){const s=t.map(({uids:a})=>a);e.forEach(({uids:a})=>{if(!s.includes(a)){const r=this.form.variants.findIndex(n=>n.uids===a);this.clearErrors({name:"variants",uid:this.form.variants[r].uid}),this.form.variants.splice(r,1)}});return}const i=[];t.forEach(({uids:s,name:a})=>{e.forEach(r=>{const n=this.form.variants.findIndex(l=>l.uids===r.uids),o=s.split(".").every(l=>r.uids.split(".").includes(l));if(o&&!i.includes(s)){i.push(s),this.setVariantData({uids:s,name:a},n);return}o&&(this.clearErrors({name:"variants",uid:this.form.variants[n].uid}),this.form.variants.splice(n,1))})})},reorderVariants(t,e){const i=t.map(({uids:s})=>s);if(this.hasCommonVariantUids(t,e)){e.forEach(({uids:s})=>{const a=i.indexOf(s),r=this.form.variants.findIndex(n=>n.uids===s);this.setVariantData({name:t[a].name},r),this.form.variants[r]=this.form.variants.splice(a,1,this.form.variants[r])[0]});return}t.forEach((s,a)=>{this.setVariantData(s,a)})},hasCommonVariantUids(t,e){return e.some(({uids:i})=>t.map(({uids:s})=>s).includes(i))},setVariantData({uids:t,name:e},i){t!==void 0&&(this.$set(this.form.variants[i],"uid",md5(t)),this.$set(this.form.variants[i],"uids",t)),this.$set(this.form.variants[i],"name",e)},variantDefaultData({uids:t,name:e}){return{position:this.variantPosition++,uid:md5(t),uids:t,name:e,media:[],is_active:!0,is_open:!1,is_default:!1,is_selected:!1,special_price_type:"fixed",manage_stock:0,in_stock:1}},resetVariants(){this.form.variants=[]},addVariantMedia(t){new MediaPicker({type:"image",multiple:!0}).on("select",({id:i,path:s})=>{this.form.variants[t].media.push({id:+i,path:s})})},removeVariantMedia(t,e){this.form.variants[t].media.splice(e,1)},notifyVariantChanges({count:t,status:e}){toaster(trans(`product::products.variants.variants_${e}`,{count:t,suffix:trans(`product::products.variants.${t>1?"variants":"variant"}`)}).toLowerCase(),{type:"default"})},notifyVariantsCreated(t){this.notifyVariantChanges({count:t,status:"created"})},notifyVariantsRemoved(t){this.notifyVariantChanges({count:t,status:"removed"})},notifyVariantsReordered(){toaster(trans("product::products.variants.variants_reordered"),{type:"default"})}}},k={data(){return{bulkEditVariantsUid:"",bulkEditVariantsField:"",bulkEditVariants:{}}},computed:{hasBulkEditVariantsUid(){return this.bulkEditVariantsUid!==""},hasBulkEditVariantsField(){return this.bulkEditVariantsField!==""}},methods:{changeBulkEditVariantsUid(t){if(this.resetVariantsSelection(),t===""){this.resetBulkEditVariantsField();return}this.selectVariants(t)},selectVariants(t){if(this.resetVariantsSelection(),t!==""){if(t!=="all"){this.selectSpecificVariants(t);return}this.selectAllVariants()}},selectAllVariants(){this.form.variants.forEach(t=>{this.$set(t,"is_selected",!0)})},selectSpecificVariants(t){this.form.variants.forEach(e=>{e.uids.includes(t)&&this.$set(e,"is_selected",!0)})},changeBulkEditVariantsField(t){["sku","price","special_price"].includes(t)&&this.focusField({selector:`#bulk-edit-variants-${t.replace(/_/g,"-")}`}),this.resetBulkEditVariants()},addBulkEditVariantsMedia(){new MediaPicker({type:"image",multiple:!0}).on("select",({id:e,path:i})=>{this.bulkEditVariants.media.push({id:+e,path:i})})},removeBulkEditVariantsMedia(t){this.bulkEditVariants.media.splice(t,1)},bulkEditvariantsDefaultData(){return{is_active:!0,media:[],price:null,special_price:null,special_price_type:"fixed",special_price_start:null,special_price_end:null,manage_stock:0,qty:null,in_stock:1}},resetBulkEditVariantFields(){this.bulkEditVariantsUid="",this.resetVariantsSelection(),this.resetBulkEditVariantsField()},resetBulkEditVariantsField(){this.bulkEditVariantsField="",this.resetBulkEditVariants()},resetBulkEditVariants(){this.bulkEditVariants={...this.bulkEditvariantsDefaultData()}},resetVariantsSelection(){this.form.variants.forEach(t=>{this.$set(t,"is_selected",!1)})},clearVariantsSpecialPriceErrors(t){Object.keys(this.errors).forEach(e=>{e.startsWith(`variants.${t}`)&&e.includes("special_price")&&this.errors.clear(e)})},updateVariantsField(t,{key:e,value:i}){this.$set(t,e,i),this.errors.clear(`variants.${t.uid}.${e}`)},updateVariantsStatus(t,{key:e,value:i}){t.is_default!==!0&&(this.$set(t,e,i),this.errors.clear(`variants.${t.uid}.${e}`))},updateVariantsSpecialPrice(t,{key:e,value:i},{special_price_type:s,special_price_start:a,special_price_end:r}){this.$set(t,e,i),this.$set(t,"special_price_type",s),this.$set(t,"special_price_start",a),this.$set(t,"special_price_end",r),this.clearVariantsSpecialPriceErrors(t.uid)},updateVariantsManageStock(t,{key:e,value:i},{qty:s}){this.$set(t,e,i),this.$set(t,"qty",s),this.errors.clear([`variants.${t.uid}.${e}`,`variants.${t.uid}.qty`])},callUpdateVariantsMethodByField(t){return{media:this.updateVariantsField,sku:this.updateVariantsField,is_active:this.updateVariantsStatus,price:this.updateVariantsField,special_price:this.updateVariantsSpecialPrice,manage_stock:this.updateVariantsManageStock,in_stock:this.updateVariantsField}[t]},updateVariants(t){this.form.variants.forEach(e=>{e.is_selected&&this.callUpdateVariantsMethodByField(t.key)(e,t,this.bulkEditVariants)})},bulkUpdateVariants(){if(!this.hasBulkEditVariantsUid&&!this.hasBulkEditVariantsField)return;const t={key:this.bulkEditVariantsField,value:this.bulkEditVariants[this.bulkEditVariantsField]};this.updateVariants(t),this.resetBulkEditVariantFields(),toaster(trans("product::products.variants.bulk_variants_updated"),{type:"default"})}}},y={data(){return{globalOptionId:"",addingGlobalOption:!1}},computed:{isAddGlobalOptionDisabled(){return this.globalOptionId===""||this.addingGlobalOption},isCollapsedOptionsAccordion(){return this.form.options.every(({is_open:t})=>t===!1)}},watch:{"form.options":{immediate:!0,handler(t){t.length===0&&this.addOption({preventFocus:!0})}}},methods:{prepareOptions(t){t.forEach(e=>{this.$set(e,"uid",this.uid()),this.$set(e,"is_open",!1),e.values.forEach((i,s)=>{this.$set(e.values[s],"uid",this.uid())})})},addOption({preventFocus:t}){const e=this.form.options,i=this.uid();e.push({uid:i,type:"",is_open:!0,is_global:!1,is_required:!1,values:[{uid:this.uid(),price_type:"fixed"}]}),t||this.focusField({selector:`#options-${i}-name`})},deleteOption(t,e){this.form.options.splice(t,1),this.clearErrors({name:"options",uid:e})},changeOptionType(t,e){let i=this.form.options[t];const s=this.isOptionTypeText(i)?"price":"label";this.clearValuesError({name:"options",uid:e}),i.values.length===1&&this.focusField({selector:`#options-${e}-values-${i.values[0].uid}-${s}`})},isOptionTypeText(t){return["field","textarea","date","date_time","time"].includes(t.type)?(t.values.length>1&&t.values.splice(1),!0):!1},isOptionTypeSelect({type:t}){return!!["dropdown","checkbox","checkbox_custom","radio","radio_custom","multiple_select"].includes(t)},addOptionRow(t,e){const i=this.uid();this.form.options[t].values.push({uid:i,price_type:"fixed"}),this.focusField({selector:`#options-${e}-values-${i}-label`})},addOptionRowOnPressEnter(t,e,i){const s=this.form.options[e],a=s.values;if(t.target.value!==""){if(a.length-1===i){this.addOptionRow(e,s.uid);return}i<a.length-1&&$(`#options-${s.uid}-values-${a[i+1].uid}-label`).trigger("focus")}},deleteOptionRow(t,e,i,s){const a=this.form.options[t];a.values.splice(i,1),this.clearValueRowErrors({name:"options",optionUid:e,valueUid:s}),a.values.length===0&&this.addOptionRow(t,e)},addGlobalOption(){this.globalOptionId!==""&&(this.addingGlobalOption=!0,$.ajax({type:"GET",url:route("admin.options.show",this.globalOptionId),dataType:"json",success:t=>{t.uid=this.uid(),t.is_open=!0,t.values.forEach(e=>{e.uid=this.uid()}),this.form.options.push(t),this.$nextTick(()=>{$(`#options-${t.uid}-name`).trigger("focus")}),toaster(trans("product::products.options.option_inserted"),{type:"default"})}}).catch(t=>{toaster(t.responseJSON.message,{type:"error"})}).always(()=>{this.globalOptionId="",this.addingGlobalOption=!1}))}}},S={watch:{"form.downloads":{immediate:!0,handler(t){t.length===0&&this.addDownload({preventMediaPicker:!0})}}},methods:{addDownload({preventMediaPicker:t}){const e=this.form.downloads;e.push({id:null,filename:null}),t||this.chooseDownloadableFile(e.length-1)},deleteDownload(t){this.form.downloads.splice(t,1)},chooseDownloadableFile(t){new MediaPicker().on("select",({id:i,filename:s})=>{this.form.downloads.splice(t,1,{id:i,filename:s})})}}},O={methods:{transformMedia(t){t.media=t.media.map(e=>e.id)},transformAttributes(t){t.attributes=t.attributes.filter(({attribute_id:e})=>e!=="").reduce((e,{attribute_id:i,uid:s,values:a})=>({...e,[s]:{attribute_id:i,values:a}}),{})},transformDownloads(t){t.downloads=t.downloads.filter(({id:e})=>e!==null).map(({id:e})=>e)},transformVariations(t){const e={text:["id","uid","label"],color:["id","uid","label","color"],image:["id","uid","label","image"]};t.variations=t.variations.filter(({name:i,type:s})=>!!i||s!=="").reduce((i,s)=>(s.type===""?s.values=[]:s.values=s.values.reduce((a,r)=>(r=_.pick(r,e[s.type]),s.type==="image"&&(r.image=r.image.id),{...a,[r.uid]:r}),{}),{...i,[s.uid]:s}),{})},transformVariants(t){t.variants=t.variants.reduce((e,i)=>(i.media=i.media.map(({id:s})=>s),{...e,[i.uid]:i}),{})},transformOptions(t){const e={text:["id","uid","price","price_type"],select:["id","uid","label","price","price_type"]};t.options=t.options.filter(({name:i,type:s})=>!!i||s!=="").reduce((i,s)=>(s.type===""?s.values=[]:s.values=s.values.reduce((a,r)=>{const n=this.isOptionTypeText(s)?"text":"select";return r=_.pick(r,e[n]),{...a,[r.uid]:r}},{}),{...i,[s.uid]:s}),{})},transformData(t){let e=JSON.parse(JSON.stringify(t));return this.hasAnyVariant&&(e=Object.assign({},e,{price:null,special_price:null,special_price_type:"fixed",special_price_start:null,special_price_end:null,sku:null,manage_stock:0,qty:null,in_stock:1})),this.transformMedia(e),this.transformAttributes(e),this.transformDownloads(e),this.transformVariations(e),this.transformVariants(e),this.transformOptions(e),e}}};window.md5=u;window.toaster=g;const P={components:{draggable:h,Selectize:f,flatPickr:p},mixins:[v,V,E,b,k,y,S,O],data(){return{textEditor:null}},mounted(){m(),this.fullscreenMode(),this.textEditor=c({setup:t=>{t.on("change",()=>{t.save(),t.getElement().dispatchEvent(new Event("input")),this.errors.clear("description")})}})},methods:{fullscreenMode(){$(".fullscreen-mode-open").on("click",t=>{t.preventDefault(),document.fullscreenElement?($(".fullscreen-mode-open .fullscreen-two").removeClass("enter-full-screen"),$(".fullscreen-mode-open .fullscreen-one").addClass("exit-full-screen"),document.exitFullscreen().catch(e=>{alert(`Error attempting to disable full-screen mode: ${e.message} (${e.name})`)})):($(".fullscreen-mode-open .fullscreen-one").removeClass("exit-full-screen"),$(".fullscreen-mode-open .fullscreen-two").addClass("enter-full-screen"),document.documentElement.requestFullscreen().catch(e=>{alert(`Error attempting to enable full-screen mode: ${e.message} (${e.name})`)}))})},uid(){return Math.random().toString(36).slice(3)},focusEditor(){this.textEditor.get("description").focus()},focusField({selector:t,key:e}){e!==void 0&&this.errors.clear(e),this.$nextTick(()=>{$(`${t}`).trigger("focus")})},removeDatePickerValue(t){this.form[t]=null},removeVariantDatePickerValue(t,e){this.form.variants[t][e]=null},regenerateVariationsAndVariantsUid(){this.regenerateVariationsUid(),this.generateNewVariants(this.getFilteredVariations()).forEach(({uids:e},i)=>{this.$set(this.form.variants[i],"uid",u(e)),this.$set(this.form.variants[i],"uids",e)})},hasAnyError({name:t,uid:e}){return Object.keys(this.errors.errors).some(i=>i.startsWith(`${t}.${e}`))},clearErrors({name:t,uid:e}){this.clearMatchedErrors(`${t}.${e}`)},clearValuesError({name:t,uid:e}){this.clearMatchedErrors(`${t}.${e}.values`)},clearValueRowErrors({name:t,uid:e,valueUid:i}){this.clearMatchedErrors(`${t}.${e}.values.${i}`)},clearMatchedErrors(t){Object.keys(this.errors.errors).forEach(e=>{e.startsWith(t)&&this.errors.clear(e)})},focusFirstErrorField(t){this.$nextTick(()=>{[...t].find(e=>e.name===Object.keys(this.errors.errors)[0]).focus()})},addMedia(){new MediaPicker({type:"image",multiple:!0}).on("select",({id:e,path:i})=>{this.form.media.push({id:+e,path:i})})},removeMedia(t){this.form.media.splice(t,1)},preventLastSlideDrag(t){return t.related.className.indexOf("disabled")===-1},toggleAccordions({selector:t,state:e,data:i}){const s=new Event("click"),a=document.querySelectorAll(t);if(!e){i.forEach(({is_open:r},n)=>{r&&a[n].dispatchEvent(s)});return}[...a].forEach(r=>{r.dispatchEvent(s)})},toggleAccordion(t,e){const i=$(t.currentTarget),s=i.find('[data-toggle="collapse"]'),a=i.next();e.is_open&&a.css("display","block"),s.attr("data-transition",!0),this.$set(e,"is_open",!e.is_open),a.slideToggle(300,()=>{s.attr("data-transition",!1),a.removeAttr("style")})},setSearchableSelectizeConfig(){this.searchableSelectizeConfig={valueField:"id",labelField:"name",searchField:"name",load:function(t,e){var i=route("admin.products.index");if(i===void 0||t.length===0)return e();$.get(i+"?query="+t,e,"json")},plugins:["remove_button"]}},setCategoriesSelectizeConfig(){this.categoriesSelectizeConfig={plugins:["remove_button"],delimiter:",",persist:!0,selectOnTab:!0,hideSelected:!1,allowEmptyOption:!0,onItemRemove(t){$("#categories").next().find(".option").each((e,i)=>{i.getAttribute("data-value")===t&&i.classList.remove("selected")})}}}}};export{P};
