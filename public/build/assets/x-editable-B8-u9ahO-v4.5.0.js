/*! X-editable - v1.5.1 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */(function(e){var n=function(t,i){this.options=e.extend({},e.fn.editableform.defaults,i),this.$div=e(t),this.options.scope||(this.options.scope=this)};n.prototype={constructor:n,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=e(e.fn.editableform.template)},initButtons:function(){var t=this.$form.find(".editable-buttons");t.append(e.fn.editableform.buttons),this.options.showbuttons==="bottom"&&t.addClass("editable-buttons-bottom")},render:function(){this.$loading=e(e.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),e.when(this.input.render()).then(e.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(e.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(i){i.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var t=this.value===null||this.value===void 0||this.value===""?this.options.defaultValue:this.value;this.input.value2input(t),this.$form.submit(e.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,i;this.$form?(t=this.$form.outerWidth(),i=this.$form.outerHeight(),t&&this.$loading.width(t),i&&this.$loading.height(i),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(t){var i=this.$form.find(".control-group"),s=this.$form.find(".editable-error-block"),a;if(t===!1)i.removeClass(e.fn.editableform.errorGroupClass),s.removeClass(e.fn.editableform.errorBlockClass).empty().hide();else{if(t){a=(""+t).split(`
`);for(var l=0;l<a.length;l++)a[l]=e("<div>").text(a[l]).html();t=a.join("<br>")}i.addClass(e.fn.editableform.errorGroupClass),s.addClass(e.fn.editableform.errorBlockClass).html(t).show()}},submit:function(t){t.stopPropagation(),t.preventDefault();var i=this.input.input2value(),s=this.validate(i);if(e.type(s)==="object"&&s.newValue!==void 0){if(i=s.newValue,this.input.value2input(i),typeof s.msg=="string"){this.error(s.msg),this.showForm();return}}else if(s){this.error(s),this.showForm();return}if(!this.options.savenochange&&this.input.value2str(i)==this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}var a=this.input.value2submit(i);this.isSaving=!0,e.when(this.save(a)).done(e.proxy(function(l){this.isSaving=!1;var u=typeof this.options.success=="function"?this.options.success.call(this.options.scope,l,i):null;if(u===!1){this.error(!1),this.showForm(!1);return}if(typeof u=="string"){this.error(u),this.showForm();return}u&&typeof u=="object"&&u.hasOwnProperty("newValue")&&(i=u.newValue),this.error(!1),this.value=i,this.$div.triggerHandler("save",{newValue:i,submitValue:a,response:l})},this)).fail(e.proxy(function(l){this.isSaving=!1;var u;typeof this.options.error=="function"?u=this.options.error.call(this.options.scope,l,i):u=typeof l=="string"?l:l.responseText||l.statusText||"Unknown error!",this.error(u),this.showForm()},this))},save:function(t){this.options.pk=e.fn.editableutils.tryParseJson(this.options.pk,!0);var i=typeof this.options.pk=="function"?this.options.pk.call(this.options.scope):this.options.pk,s=!!(typeof this.options.url=="function"||this.options.url&&(this.options.send==="always"||this.options.send==="auto"&&i!==null&&i!==void 0)),a;if(s)return this.showLoading(),a={name:this.options.name||"",value:t,pk:i},typeof this.options.params=="function"?a=this.options.params.call(this.options.scope,a):(this.options.params=e.fn.editableutils.tryParseJson(this.options.params,!0),e.extend(a,this.options.params)),typeof this.options.url=="function"?this.options.url.call(this.options.scope,a):e.ajax(e.extend({url:this.options.url,data:a,type:"POST"},this.options.ajaxOptions))},validate:function(t){if(t===void 0&&(t=this.value),typeof this.options.validate=="function")return this.options.validate.call(this.options.scope,t)},option:function(t,i){t in this.options&&(this.options[t]=i),t==="value"&&this.setValue(i)},setValue:function(t,i){i?this.value=this.input.str2value(t):this.value=t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},e.fn.editableform=function(t){var i=arguments;return this.each(function(){var s=e(this),a=s.data("editableform"),l=typeof t=="object"&&t;a||s.data("editableform",a=new n(this,l)),typeof t=="string"&&a[t].apply(a,Array.prototype.slice.call(i,1))})},e.fn.editableform.Constructor=n,e.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},e.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',e.fn.editableform.loading='<div class="editableform-loading"></div>',e.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',e.fn.editableform.errorGroupClass=null,e.fn.editableform.errorBlockClass="editable-error",e.fn.editableform.engine="jquery"})(window.jQuery);(function(e){e.fn.editableutils={inherit:function(n,t){var i=function(){};i.prototype=t.prototype,n.prototype=new i,n.prototype.constructor=n,n.superclass=t.prototype},setCursorPosition:function(n,t){if(n.setSelectionRange)n.setSelectionRange(t,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},tryParseJson:function(n,t){if(typeof n=="string"&&n.length&&n.match(/^[\{\[].*[\}\]]$/))if(t)try{n=new Function("return "+n)()}catch{}finally{return n}else n=new Function("return "+n)();return n},sliceObj:function(n,t,i){var s,a,l={};if(!e.isArray(t)||!t.length)return l;for(var u=0;u<t.length;u++)s=t[u],n.hasOwnProperty(s)&&(l[s]=n[s]),i!==!0&&(a=s.toLowerCase(),n.hasOwnProperty(a)&&(l[s]=n[a]));return l},getConfigData:function(n){var t={};return e.each(n.data(),function(i,s){(typeof s!="object"||s&&typeof s=="object"&&(s.constructor===Object||s.constructor===Array))&&(t[i]=s)}),t},objectKeys:function(n){if(Object.keys)return Object.keys(n);if(n!==Object(n))throw new TypeError("Object.keys called on a non-object");var t=[],i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t},escape:function(n){return e("<div>").text(n).html()},itemsByValue:function(n,t,i){if(!t||n===null)return[];if(typeof i!="function"){var s=i||"value";i=function(c){return c[s]}}var a=e.isArray(n),l=[],u=this;return e.each(t,function(c,b){if(b.children)l=l.concat(u.itemsByValue(n,b.children,i));else if(a)e.grep(n,function(w){return w==(b&&typeof b=="object"?i(b):b)}).length&&l.push(b);else{var v=b&&typeof b=="object"?i(b):b;n==v&&l.push(b)}}),l},createInput:function(n){var t,i,s,a=n.type;return a==="date"&&(n.mode==="inline"?e.fn.editabletypes.datefield?a="datefield":e.fn.editabletypes.dateuifield&&(a="dateuifield"):e.fn.editabletypes.date?a="date":e.fn.editabletypes.dateui&&(a="dateui"),a==="date"&&!e.fn.editabletypes.date&&(a="combodate")),a==="datetime"&&n.mode==="inline"&&(a="datetimefield"),a==="wysihtml5"&&!e.fn.editabletypes[a]&&(a="textarea"),typeof e.fn.editabletypes[a]=="function"?(t=e.fn.editabletypes[a],i=this.sliceObj(n,this.objectKeys(t.defaults)),s=new t(i),s):(e.error("Unknown type: "+a),!1)},supportsTransitions:function(){var n=document.body||document.documentElement,t=n.style,i="transition",s=["Moz","Webkit","Khtml","O","ms"];if(typeof t[i]=="string")return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var a=0;a<s.length;a++)if(typeof t[s[a]+i]=="string")return!0;return!1}}})(window.jQuery);(function(e){var n=function(i,s){this.init(i,s)},t=function(i,s){this.init(i,s)};n.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,s){this.$element=e(i),this.options=e.extend({},e.fn.editableContainer.defaults,s),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",e.proxy(function(){this.destroy()},this)),e(document).data("editable-handlers-attached")||(e(document).on("keyup.editable",function(a){a.which===27&&e(".editable-open").editableContainer("hide")}),e(document).on("click.editable",function(a){var l=e(a.target),u,c=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(e.contains(document.documentElement,a.target)&&!l.is(document)){for(u=0;u<c.length;u++)if(l.is(c[u])||l.parents(c[u]).length)return;n.prototype.closeOthers(a.target)}}),e(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!e.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var i in this.options)i in this.defaults?this.containerOptions[i]=this.options[i]:this.formOptions[i]=this.options[i]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var i;return this.containerDataName&&(i=this.$element.data(this.containerDataName))||(i=this.$element.data(this.containerName)),i},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:e.proxy(this.save,this),nochange:e.proxy(function(){this.hide("nochange")},this),cancel:e.proxy(function(){this.hide("cancel")},this),show:e.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:e.proxy(this.setPosition,this),resize:e.proxy(this.setPosition,this),rendered:e.proxy(function(){this.$element.triggerHandler("shown",e(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(i){this.$element.addClass("editable-open"),i!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=e("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(i){if(!(!this.tip()||!this.tip().is(":visible")||!this.$element.hasClass("editable-open"))){if(this.$form.data("editableform").isSaving){this.delayedHide={reason:i};return}else this.delayedHide=!1;this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",i||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(i){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(i)},setPosition:function(){},save:function(i,s){this.$element.triggerHandler("save",s),this.hide("save")},option:function(i,s){this.options[i]=s,i in this.containerOptions?(this.containerOptions[i]=s,this.setContainerOption(i,s)):(this.formOptions[i]=s,this.$form&&this.$form.editableform("option",i,s))},setContainerOption:function(i,s){this.call("option",i,s)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(i){e(".editable-open").each(function(s,a){if(!(a===i||e(a).find(i).length)){var l=e(a),u=l.data("editableContainer");u&&(u.options.onblur==="cancel"?l.data("editableContainer").hide("onblur"):u.options.onblur==="submit"&&l.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},e.fn.editableContainer=function(i){var s=arguments;return this.each(function(){var a=e(this),l="editableContainer",u=a.data(l),c=typeof i=="object"&&i,b=c.mode==="inline"?t:n;u||a.data(l,u=new b(this,c)),typeof i=="string"&&u[i].apply(u,Array.prototype.slice.call(s,1))})},e.fn.editableContainer.Popup=n,e.fn.editableContainer.Inline=t,e.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(i){i.handler&&i.handler()}}})(window.jQuery);(function(e){e.extend(e.fn.editableContainer.Inline.prototype,e.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=e("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,e.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})})(window.jQuery);(function(e){var n=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.editable.defaults,i,e.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!e.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};n.prototype={constructor:n,init:function(){var t=!1,i;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=e.fn.editableutils.createInput(this.options),!!this.input){switch(this.options.value===void 0||this.options.value===null?(this.value=this.input.html2value(e.trim(this.$element.html())),t=!0):(this.options.value=e.fn.editableutils.tryParseJson(this.options.value,!0),typeof this.options.value=="string"?this.value=this.input.str2value(this.options.value):this.value=this.options.value),this.$element.addClass("editable"),this.input.type==="textarea"&&this.$element.addClass("editable-pre-wrapped"),this.options.toggle!=="manual"?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",e.proxy(function(s){if(this.options.disabled||s.preventDefault(),this.options.toggle==="mouseenter")this.show();else{var a=this.options.toggle!=="click";this.toggle(a)}},this))):this.$element.attr("tabindex",-1),typeof this.options.display=="function"&&(this.options.autotext="always"),this.options.autotext){case"always":i=!0;break;case"auto":i=!e.trim(this.$element.text()).length&&this.value!==null&&this.value!==void 0&&!t;break;default:i=!1}e.when(i?this.render():!0).then(e.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var t=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",t,e.proxy(function(i){var s=e(i.target);s.data("editable")||(s.hasClass(this.options.emptyclass)&&s.empty(),s.editable(this.options).trigger(i))},this))},render:function(t){if(this.options.display!==!1)return this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):typeof this.options.display=="function"?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0])},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.options.toggle!=="manual"&&this.$element.attr("tabindex")==="-1"&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(t,i){if(t&&typeof t=="object"){e.each(t,e.proxy(function(s,a){this.option(e.trim(s),a)},this));return}if(this.options[t]=i,t==="disabled")return i?this.disable():this.enable();t==="value"&&this.setValue(i),this.container&&this.container.option(t,i),this.input.option&&this.input.option(t,i)},handleEmpty:function(t){this.options.display!==!1&&(t!==void 0?this.isEmpty=t:typeof this.input.isEmpty=="function"?this.isEmpty=this.input.isEmpty(this.$element):this.isEmpty=e.trim(this.$element.html())==="",this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(t){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=e.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",e.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(t)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,i){if(this.options.unsavedclass){var s=!1;s=s||typeof this.options.url=="function",s=s||this.options.display===!1,s=s||i.response!==void 0,s=s||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(i.newValue),s?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var a=this.$element,l=a.css("background-color");a.css("background-color",this.options.highlight),setTimeout(function(){l==="transparent"&&(l=""),a.css("background-color",l),a.addClass("editable-bg-transition"),setTimeout(function(){a.removeClass("editable-bg-transition")},1700)},10)}this.setValue(i.newValue,!1,i.response)},validate:function(){if(typeof this.options.validate=="function")return this.options.validate.call(this,this.value)},setValue:function(t,i,s){i?this.value=this.input.str2value(t):this.value=t,this.container&&this.container.option("value",this.value),e.when(this.render(s)).then(e.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),this.options.toggle!=="manual"&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},e.fn.editable=function(t){var i={},s=arguments,a="editable";switch(t){case"validate":return this.each(function(){var o=e(this),h=o.data(a),p;h&&(p=h.validate())&&(i[h.options.name]=p)}),i;case"getValue":return arguments.length===2&&arguments[1]===!0?i=this.eq(0).data(a).value:this.each(function(){var o=e(this),h=o.data(a);h&&h.value!==void 0&&h.value!==null&&(i[h.options.name]=h.input.value2submit(h.value))}),i;case"submit":var l=arguments[1]||{},u=this,c=this.editable("validate");if(e.isEmptyObject(c)){var b={};if(u.length===1){var v=u.data("editable"),w={name:v.options.name||"",value:v.input.value2submit(v.value),pk:typeof v.options.pk=="function"?v.options.pk.call(v.options.scope):v.options.pk};typeof v.options.params=="function"?w=v.options.params.call(v.options.scope,w):(v.options.params=e.fn.editableutils.tryParseJson(v.options.params,!0),e.extend(w,v.options.params)),b={url:v.options.url,data:w,type:"POST"},l.success=l.success||v.options.success,l.error=l.error||v.options.error}else{var r=this.editable("getValue");b={url:l.url,data:r,type:"POST"}}b.success=typeof l.success=="function"?function(o){l.success.call(u,o,l)}:e.noop,b.error=typeof l.error=="function"?function(){l.error.apply(u,arguments)}:e.noop,l.ajaxOptions&&e.extend(b,l.ajaxOptions),l.data&&e.extend(b.data,l.data),e.ajax(b)}else typeof l.error=="function"&&l.error.call(u,c);return this}return this.each(function(){var o=e(this),h=o.data(a),p=typeof t=="object"&&t;if(p&&p.selector){h=new n(this,p);return}h||o.data(a,h=new n(this,p)),typeof t=="string"&&h[t].apply(h,Array.prototype.slice.call(s,1))})},e.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}})(window.jQuery);(function(e){e.fn.editabletypes={};var n=function(){};n.prototype={init:function(t,i,s){this.type=t,this.options=e.extend({},s,i)},prerender:function(){this.$tpl=e(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(t,i){e(i)[this.options.escape?"text":"html"](e.trim(t))},html2value:function(t){return e("<div>").html(t).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(t){return e("<div>").text(t).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){this.options[t]!==void 0&&this.options[t]!==null&&this.$input.attr(t,this.options[t])},option:function(t,i){this.options[t]=i}},n.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},e.extend(e.fn.editabletypes,{abstractinput:n})})(window.jQuery);(function(e){var n=function(t){};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){var t=e.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),t.resolve()},function(){this.error=this.options.sourceError,t.resolve()}),t.promise()},html2value:function(t){return null},value2html:function(t,i,s,a){var l=e.Deferred(),u=function(){typeof s=="function"?s.call(i,t,this.sourceData,a):this.value2htmlFinal(t,i),l.resolve()};return t===null?u.call(this):this.onSourceReady(u,function(){l.resolve()}),l.promise()},onSourceReady:function(t,i){var s;if(e.isFunction(this.options.source)?(s=this.options.source.call(this.options.scope),this.sourceData=null):s=this.options.source,this.options.sourceCache&&e.isArray(this.sourceData)){t.call(this);return}try{s=e.fn.editableutils.tryParseJson(s,!1)}catch{i.call(this);return}if(typeof s=="string"){if(this.options.sourceCache){var a=s,l;if(e(document).data(a)||e(document).data(a,{}),l=e(document).data(a),l.loading===!1&&l.sourceData){this.sourceData=l.sourceData,this.doPrepend(),t.call(this);return}else if(l.loading===!0){l.callbacks.push(e.proxy(function(){this.sourceData=l.sourceData,this.doPrepend(),t.call(this)},this)),l.err_callbacks.push(e.proxy(i,this));return}else l.loading=!0,l.callbacks=[],l.err_callbacks=[]}var u=e.extend({url:s,type:"get",cache:!1,dataType:"json",success:e.proxy(function(c){l&&(l.loading=!1),this.sourceData=this.makeArray(c),e.isArray(this.sourceData)?(l&&(l.sourceData=this.sourceData,e.each(l.callbacks,function(){this.call()})),this.doPrepend(),t.call(this)):(i.call(this),l&&e.each(l.err_callbacks,function(){this.call()}))},this),error:e.proxy(function(){i.call(this),l&&(l.loading=!1,e.each(l.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);e.ajax(u)}else this.sourceData=this.makeArray(s),e.isArray(this.sourceData)?(this.doPrepend(),t.call(this)):i.call(this)},doPrepend:function(){this.options.prepend===null||this.options.prepend===void 0||(e.isArray(this.prependData)||(e.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=e.fn.editableutils.tryParseJson(this.options.prepend,!0),typeof this.options.prepend=="string"&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),e.isArray(this.prependData)&&e.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(t,i){},makeArray:function(t){var i,s,a=[],l,u;if(!t||typeof t=="string")return null;if(e.isArray(t)){u=function(b,v){if(s={value:b,text:v},i++>=2)return!1};for(var c=0;c<t.length;c++)l=t[c],typeof l=="object"?(i=0,e.each(l,u),i===1?a.push(s):i>1&&(l.children&&(l.children=this.makeArray(l.children)),a.push(l))):a.push({value:l,text:l})}else e.each(t,function(b,v){a.push({value:b,text:v})});return a},option:function(t,i){this.options[t]=i,t==="source"&&(this.sourceData=null),t==="prepend"&&(this.prependData=null)}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),e.fn.editabletypes.list=n})(window.jQuery);(function(e){var n=function(t){this.init("text",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),e.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=e('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(e.proxy(function(t){if(!~e.inArray(t.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(t)},100)}},this)).parent().css("position","relative"),this.$clear.click(e.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(t){if(this.$clear){var i=this.$input.val().length,s=this.$clear.is(":visible");i&&!s&&this.$clear.show(),!i&&s&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),e.fn.editabletypes.text=n})(window.jQuery);(function(e){var n=function(t){this.init("textarea",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(t){t.ctrlKey&&t.which===13&&e(this).closest("form").submit()})},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),e.fn.editabletypes.textarea=n})(window.jQuery);(function(e){var n=function(t){this.init("select",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.list),e.extend(n.prototype,{renderList:function(){this.$input.empty();var t=function(i,s){var a;if(e.isArray(s))for(var l=0;l<s.length;l++)a={},s[l].children?(a.label=s[l].text,i.append(t(e("<optgroup>",a),s[l].children))):(a.value=s[l].value,s[l].disabled&&(a.disabled=!0),i.append(e("<option>",a).text(s[l].text)));return i};t(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(i){i.which===13&&e(this).closest("form").submit()})},value2htmlFinal:function(t,i){var s="",a=e.fn.editableutils.itemsByValue(t,this.sourceData);a.length&&(s=a[0].text),e.fn.editabletypes.abstractinput.prototype.value2html.call(this,s,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){e(this).closest("form").submit()})}}),n.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),e.fn.editabletypes.select=n})(window.jQuery);(function(e){var n=function(t){this.init("checklist",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.list),e.extend(n.prototype,{renderList:function(){var t;if(this.$tpl.empty(),!!e.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)t=e("<label>").append(e("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(e("<span>").text(" "+this.sourceData[i].text)),e("<div>").append(t).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(t){return e.isArray(t)?t.sort().join(e.trim(this.options.separator)):""},str2value:function(t){var i,s=null;return typeof t=="string"&&t.length?(i=new RegExp("\\s*"+e.trim(this.options.separator)+"\\s*"),s=t.split(i)):e.isArray(t)?s=t:s=[t],s},value2input:function(t){this.$input.prop("checked",!1),e.isArray(t)&&t.length&&this.$input.each(function(i,s){var a=e(s);e.each(t,function(l,u){a.val()==u&&a.prop("checked",!0)})})},input2value:function(){var t=[];return this.$input.filter(":checked").each(function(i,s){t.push(e(s).val())}),t},value2htmlFinal:function(t,i){var s=[],a=e.fn.editableutils.itemsByValue(t,this.sourceData),l=this.options.escape;a.length?(e.each(a,function(u,c){var b=l?e.fn.editableutils.escape(c.text):c.text;s.push(b)}),e(i).html(s.join("<br>"))):e(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(t){t.which===13&&e(this).closest("form").submit()})}}),n.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),e.fn.editabletypes.checklist=n})(window.jQuery);(function(e){var n=function(t){this.init("password",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),e.extend(n.prototype,{value2html:function(t,i){t?e(i).text("[hidden]"):e(i).empty()},html2value:function(t){return null}}),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),e.fn.editabletypes.password=n})(window.jQuery);(function(e){var n=function(t){this.init("email",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),e.fn.editabletypes.email=n})(window.jQuery);(function(e){var n=function(t){this.init("url",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),e.fn.editabletypes.url=n})(window.jQuery);(function(e){var n=function(t){this.init("tel",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),e.fn.editabletypes.tel=n})(window.jQuery);(function(e){var n=function(t){this.init("number",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.text),e.extend(n.prototype,{render:function(){n.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),n.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),e.fn.editabletypes.number=n})(window.jQuery);(function(e){var n=function(t){this.init("range",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.number),e.extend(n.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){e(this).siblings("output").text(e(this).val())})},activate:function(){this.$input.focus()}}),n.defaults=e.extend({},e.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),e.fn.editabletypes.range=n})(window.jQuery);(function(e){var n=function(t){this.init("time",t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.setClass()}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),e.fn.editabletypes.time=n})(window.jQuery);(function(e){var n=function(t){if(this.init("select2",t,n.defaults),t.select2=t.select2||{},this.sourceData=null,t.placeholder&&(t.select2.placeholder=t.placeholder),!t.select2.tags&&t.source){var i=t.source;e.isFunction(t.source)&&(i=t.source.call(t.scope)),typeof i=="string"?(t.select2.ajax=t.select2.ajax||{},t.select2.ajax.data||(t.select2.ajax.data=function(a){return{query:a}}),t.select2.ajax.results||(t.select2.ajax.results=function(a){return{results:a}}),t.select2.ajax.url=i):(this.sourceData=this.convertSource(i),t.select2.data=this.sourceData)}if(this.options.select2=e.extend({},n.defaults.select2,t.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,typeof this.idFunc!="function"){var s=this.idFunc||"id";this.idFunc=function(a){return a[s]}}this.formatSelection=this.options.select2.formatSelection,typeof this.formatSelection!="function"&&(this.formatSelection=function(a){return a.text})};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",e.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){e(this).closest("form").parent().triggerHandler("resize")})},value2html:function(t,i){var s="",a,l=this;this.options.select2.tags?a=t:this.sourceData&&(a=e.fn.editableutils.itemsByValue(t,this.sourceData,this.idFunc)),e.isArray(a)?(s=[],e.each(a,function(u,c){s.push(c&&typeof c=="object"?l.formatSelection(c):c)})):a&&(s=l.formatSelection(a)),s=e.isArray(s)?s.join(this.options.viewseparator):s,n.superclass.value2html.call(this,s,i)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(t){if(e.isArray(t)&&(t=t.join(this.getSeparator())),this.$input.data("select2")?this.$input.val(t).trigger("change",!0):(this.$input.val(t),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,s=this.options.select2.formatSelection;if(!i&&!s){var a=e(this.options.scope);if(!a.data("editable").isEmpty){var l={id:t,text:a.text()};this.$input.select2("data",l)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(t,i){if(typeof t!="string"||!this.isMultiple)return t;i=i||this.getSeparator();var s,a,l;if(t===null||t.length<1)return null;for(s=t.split(i),a=0,l=s.length;a<l;a=a+1)s[a]=e.trim(s[a]);return s},autosubmit:function(){this.$input.on("change",function(t,i){i||e(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||e.fn.select2.defaults.separator},convertSource:function(t){if(e.isArray(t)&&t.length&&t[0].value!==void 0)for(var i=0;i<t.length;i++)t[i].value!==void 0&&(t[i].id=t[i].value,delete t[i].value);return t},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),e.fn.editabletypes.select2=n})(window.jQuery);(function(e){var n=function(t,i){if(this.$element=e(t),!this.$element.is("input")){e.error("Combodate should be applied to INPUT element");return}this.options=e.extend({},e.fn.combodate.defaults,i,this.$element.data()),this.init()};n.prototype={constructor:n,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=e('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",e.proxy(function(t){this.$element.val(this.getValue()).change(),this.options.smartDays&&(e(t.target).is(".month")||e(t.target).is(".year"))&&this.fillCombo("day")},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template;return e.each(this.map,function(i,s){s=s[0];var a=new RegExp(s+"+"),l=s.length>1?s.substring(1,2):s;t=t.replace(a,"{"+l+"}")}),t=t.replace(/ /g,"&nbsp;"),e.each(this.map,function(i,s){s=s[0];var a=s.length>1?s.substring(1,2):s;t=t.replace("{"+a+"}",'<select class="'+i+'"></select>')}),t},initCombos:function(){for(var t in this.map){var i=this.$widget.find("."+t);this["$"+t]=i.length?i:null,this.fillCombo(t)}},fillCombo:function(t){var i=this["$"+t];if(i){var s="fill"+t.charAt(0).toUpperCase()+t.slice(1),a=this[s](),l=i.val();i.empty();for(var u=0;u<a.length;u++)i.append('<option value="'+a[u][0]+'">'+a[u][1]+"</option>");i.val(l)}},fillCommon:function(t){var i=[],s;if(this.options.firstItem==="name"){s=moment.relativeTime||moment.langData()._relativeTime;var a=typeof s[t]=="function"?s[t](1,!0,t,!1):s[t];a=a.split(" ").reverse()[0],i.push(["",a])}else this.options.firstItem==="empty"&&i.push(["",""]);return i},fillDay:function(){var t=this.fillCommon("d"),i,s,a=this.options.template.indexOf("DD")!==-1,l=31;if(this.options.smartDays&&this.$month&&this.$year){var u=parseInt(this.$month.val(),10),c=parseInt(this.$year.val(),10);!isNaN(u)&&!isNaN(c)&&(l=moment([c,u]).daysInMonth())}for(s=1;s<=l;s++)i=a?this.leadZero(s):s,t.push([s,i]);return t},fillMonth:function(){var t=this.fillCommon("M"),i,s,a=this.options.template.indexOf("MMMM")!==-1,l=this.options.template.indexOf("MMM")!==-1,u=this.options.template.indexOf("MM")!==-1;for(s=0;s<=11;s++)a?i=moment().date(1).month(s).format("MMMM"):l?i=moment().date(1).month(s).format("MMM"):u?i=this.leadZero(s+1):i=s+1,t.push([s,i]);return t},fillYear:function(){var t=[],i,s,a=this.options.template.indexOf("YYYY")!==-1;for(s=this.options.maxYear;s>=this.options.minYear;s--)i=a?s:(s+"").substring(2),t[this.options.yearDescending?"push":"unshift"]([s,i]);return t=this.fillCommon("y").concat(t),t},fillHour:function(){var t=this.fillCommon("h"),i,s,a=this.options.template.indexOf("h")!==-1;this.options.template.indexOf("H");var l=this.options.template.toLowerCase().indexOf("hh")!==-1,u=a?1:0,c=a?12:23;for(s=u;s<=c;s++)i=l?this.leadZero(s):s,t.push([s,i]);return t},fillMinute:function(){var t=this.fillCommon("m"),i,s,a=this.options.template.indexOf("mm")!==-1;for(s=0;s<=59;s+=this.options.minuteStep)i=a?this.leadZero(s):s,t.push([s,i]);return t},fillSecond:function(){var t=this.fillCommon("s"),i,s,a=this.options.template.indexOf("ss")!==-1;for(s=0;s<=59;s+=this.options.secondStep)i=a?this.leadZero(s):s,t.push([s,i]);return t},fillAmpm:function(){var t=this.options.template.indexOf("a")!==-1;this.options.template.indexOf("A");var i=[["am",t?"am":"AM"],["pm",t?"pm":"PM"]];return i},getValue:function(t){var i,s={},a=this,l=!1;return e.each(this.map,function(u,c){if(u!=="ampm"){var b=u==="day"?1:0;if(s[u]=a["$"+u]?parseInt(a["$"+u].val(),10):b,isNaN(s[u]))return l=!0,!1}}),l?"":(this.$ampm&&(s.hour===12?s.hour=this.$ampm.val()==="am"?0:12:s.hour=this.$ampm.val()==="am"?s.hour:s.hour+12),i=moment([s.year,s.month,s.day,s.hour,s.minute,s.second]),this.highlight(i),t=t===void 0?this.options.format:t,t===null?i.isValid()?i:null:i.isValid()?i.format(t):"")},setValue:function(t){if(!t)return;var i=typeof t=="string"?moment(t,this.options.format):moment(t),s=this,a={};function l(u,c){var b={};return u.children("option").each(function(v,w){var r=e(w).attr("value"),o;r!==""&&(o=Math.abs(r-c),(typeof b.distance>"u"||o<b.distance)&&(b={value:r,distance:o}))}),b.value}i.isValid()&&(e.each(this.map,function(u,c){u!=="ampm"&&(a[u]=i[c[1]]())}),this.$ampm&&(a.hour>=12?(a.ampm="pm",a.hour>12&&(a.hour-=12)):(a.ampm="am",a.hour===0&&(a.hour=12))),e.each(a,function(u,c){s["$"+u]&&(u==="minute"&&s.options.minuteStep>1&&s.options.roundTime&&(c=l(s["$"+u],c)),u==="second"&&s.options.secondStep>1&&s.options.roundTime&&(c=l(s["$"+u],c)),s["$"+u].val(c))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(i.format(this.options.format)).change())},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return t<=9?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},e.fn.combodate=function(t){var i,s=Array.apply(null,arguments);return s.shift(),t==="getValue"&&this.length&&(i=this.eq(0).data("combodate"))?i.getValue.apply(i,s):this.each(function(){var a=e(this),l=a.data("combodate"),u=typeof t=="object"&&t;l||a.data("combodate",l=new n(this,u)),typeof t=="string"&&typeof l[t]=="function"&&l[t].apply(l,s)})},e.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}})(window.jQuery);(function(e){var n=function(t){this.init("combodate",t,n.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),t.combodate=e.fn.editableutils.tryParseJson(t.combodate,!0),this.options.combodate=e.extend({},n.defaults.combodate,t.combodate,{format:this.options.format,template:this.options.template})};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{render:function(){this.$input.combodate(this.options.combodate),e.fn.editableform.engine==="bs3"&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,i){var s=t?t.format(this.options.viewformat):"";n.superclass.value2html.call(this,s,i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),e.fn.editabletypes.combodate=n})(window.jQuery);(function(e){var n=e.fn.editableform.Constructor.prototype.initInput;e.extend(e.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=e(e.fn.editableform.template),this.$form.find(".control-group").addClass("form-group"),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){n.apply(this);var t=this.input.options.inputclass===null||this.input.options.inputclass===!1,i="input-sm",s="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");~e.inArray(this.input.type,s)&&(this.input.$input.addClass("form-control"),t&&(this.input.options.inputclass=i,this.input.$input.addClass(i)));for(var a=this.$form.find(".editable-buttons"),l=t?[i]:this.input.options.inputclass.split(" "),u=0;u<l.length;u++)l[u].toLowerCase()==="input-lg"&&a.find("button").removeClass("btn-sm").addClass("btn-lg")}}),e.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button><button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>',e.fn.editableform.errorGroupClass="has-error",e.fn.editableform.errorBlockClass=null,e.fn.editableform.engine="bs3"})(window.jQuery);(function(e){e.extend(e.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:e.fn.popover.Constructor.DEFAULTS,initContainer:function(){e.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var n;this.$element.data("template")&&(n=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),n&&this.$element.data("template",n)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(n,t){this.container().options[n]=t},setPosition:function(){(function(){var n=this.tip(),t=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,s=i.test(t);s&&(t=t.replace(i,"")||"top");var a=this.getPosition(),l=n[0].offsetWidth,u=n[0].offsetHeight;if(s){var c=this.$element.parent(),b=t,v=document.documentElement.scrollTop||document.body.scrollTop,w=this.options.container=="body"?window.innerWidth:c.outerWidth(),r=this.options.container=="body"?window.innerHeight:c.outerHeight(),o=this.options.container=="body"?0:c.offset().left;t=t=="bottom"&&a.top+a.height+u-v>r?"top":t=="top"&&a.top-v-u<0?"bottom":t=="right"&&a.right+l>w?"left":t=="left"&&a.left-l<o?"right":t,n.removeClass(b).addClass(t)}var h=this.getCalculatedOffset(t,a,l,u);this.applyPlacement(h,t)}).call(this.container())}})})(window.jQuery);(function(e){function n(){return new Date(Date.UTC.apply(Date,arguments))}var t=function(r,o){this._process_options(o),this.element=e(r),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=e(w.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(h,p){return parseInt(p)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};t.prototype={constructor:t,_process_options:function(r){this._o=e.extend({},this._o,r);var o=this.o=e.extend({},this._o),h=o.language;switch(v[h]||(h=h.split("-")[0],v[h]||(h=c.language)),o.language=h,o.startView){case 2:case"decade":o.startView=2;break;case 1:case"year":o.startView=1;break;default:o.startView=0}switch(o.minViewMode){case 1:case"months":o.minViewMode=1;break;case 2:case"years":o.minViewMode=2;break;default:o.minViewMode=0}o.startView=Math.max(o.startView,o.minViewMode),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7;var p=w.parseFormat(o.format);o.startDate!==-1/0&&(o.startDate=w.parseDate(o.startDate,p,o.language)),o.endDate!==1/0&&(o.endDate=w.parseDate(o.endDate,p,o.language)),o.daysOfWeekDisabled=o.daysOfWeekDisabled||[],e.isArray(o.daysOfWeekDisabled)||(o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/)),o.daysOfWeekDisabled=e.map(o.daysOfWeekDisabled,function(f){return parseInt(f,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(r){for(var o=0,h,p;o<r.length;o++)h=r[o][0],p=r[o][1],h.on(p)},_unapplyEvents:function(r){for(var o=0,h,p;o<r.length;o++)h=r[o][0],p=r[o][1],h.off(p)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(r){this.element.is(r.target)||this.element.find(r.target).size()||this.picker.is(r.target)||this.picker.find(r.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(r,o){var h=o||this.date,p=new Date(h.getTime()+h.getTimezoneOffset()*6e4);this.element.trigger({type:r,date:p,format:e.proxy(function(f){var m=f||this.o.format;return w.formatDate(h,m,this.o.language)},this)})},show:function(r){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),r&&r.preventDefault(),this._trigger("show")},hide:function(r){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var r=this.getUTCDate();return new Date(r.getTime()+r.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},setDate:function(r){this.setUTCDate(new Date(r.getTime()-r.getTimezoneOffset()*6e4))},setUTCDate:function(r){this.date=r,this.setValue()},setValue:function(){var r=this.getFormattedDate();this.isInput?this.element.val(r):this.component&&this.element.find("input").val(r)},getFormattedDate:function(r){return r===void 0&&(r=this.o.format),w.formatDate(this.date,r,this.o.language)},setStartDate:function(r){this._process_options({startDate:r}),this.update(),this.updateNavArrows()},setEndDate:function(r){this._process_options({endDate:r}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(r){this._process_options({daysOfWeekDisabled:r}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var r=parseInt(this.element.parents().filter(function(){return e(this).css("z-index")!="auto"}).first().css("z-index"))+10,o=this.component?this.component.parent().offset():this.element.offset(),h=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:o.top+h,left:o.left,zIndex:r})}},_allow_update:!0,update:function(){if(this._allow_update){var r,o=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(r=arguments[0],o=!0):(r=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=w.parseDate(r,this.o.format,this.o.language),o&&this.setValue(),this.date<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.date>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=new Date(this.date),this.fill()}},fillDow:function(){var r=this.o.weekStart,o="<tr>";if(this.o.calendarWeeks){var h='<th class="cw">&nbsp;</th>';o+=h,this.picker.find(".datepicker-days thead tr:first-child").prepend(h)}for(;r<this.o.weekStart+7;)o+='<th class="dow">'+v[this.o.language].daysMin[r++%7]+"</th>";o+="</tr>",this.picker.find(".datepicker-days thead").append(o)},fillMonths:function(){for(var r="",o=0;o<12;)r+='<span class="month">'+v[this.o.language].monthsShort[o++]+"</span>";this.picker.find(".datepicker-months td").html(r)},setRange:function(r){!r||!r.length?delete this.range:this.range=e.map(r,function(o){return o.valueOf()}),this.fill()},getClassNames:function(r){var o=[],h=this.viewDate.getUTCFullYear(),p=this.viewDate.getUTCMonth(),f=this.date.valueOf(),m=new Date;return r.getUTCFullYear()<h||r.getUTCFullYear()==h&&r.getUTCMonth()<p?o.push("old"):(r.getUTCFullYear()>h||r.getUTCFullYear()==h&&r.getUTCMonth()>p)&&o.push("new"),this.o.todayHighlight&&r.getUTCFullYear()==m.getFullYear()&&r.getUTCMonth()==m.getMonth()&&r.getUTCDate()==m.getDate()&&o.push("today"),f&&r.valueOf()==f&&o.push("active"),(r.valueOf()<this.o.startDate||r.valueOf()>this.o.endDate||e.inArray(r.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&o.push("disabled"),this.range&&(r>this.range[0]&&r<this.range[this.range.length-1]&&o.push("range"),e.inArray(r.valueOf(),this.range)!=-1&&o.push("selected")),o},fill:function(){var r=new Date(this.viewDate),o=r.getUTCFullYear(),h=r.getUTCMonth(),p=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,f=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,m=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,y=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();var d;this.picker.find(".datepicker-days thead th.datepicker-switch").text(v[this.o.language].months[h]+" "+o),this.picker.find("tfoot th.today").text(v[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(v[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var g=n(o,h-1,28,0,0,0,0),T=w.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(T),g.setUTCDate(T-(g.getUTCDay()-this.o.weekStart+7)%7);var k=new Date(g);k.setUTCDate(k.getUTCDate()+42),k=k.valueOf();for(var x=[],M;g.valueOf()<k;){if(g.getUTCDay()==this.o.weekStart&&(x.push("<tr>"),this.o.calendarWeeks)){var U=new Date(+g+(this.o.weekStart-g.getUTCDay()-7)%7*864e5),F=new Date(+U+(11-U.getUTCDay())%7*864e5),S=new Date(+(S=n(F.getUTCFullYear(),0,1))+(11-S.getUTCDay())%7*864e5),_=(F-S)/864e5/7+1;x.push('<td class="cw">'+_+"</td>")}M=this.getClassNames(g),M.push("day");var D=this.o.beforeShowDay(g);D===void 0?D={}:typeof D=="boolean"?D={enabled:D}:typeof D=="string"&&(D={classes:D}),D.enabled===!1&&M.push("disabled"),D.classes&&(M=M.concat(D.classes.split(/\s+/))),D.tooltip&&(d=D.tooltip),M=e.unique(M),x.push('<td class="'+M.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+g.getUTCDate()+"</td>"),g.getUTCDay()==this.o.weekEnd&&x.push("</tr>"),g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(x.join(""));var C=this.date&&this.date.getUTCFullYear(),O=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");C&&C==o&&O.eq(this.date.getUTCMonth()).addClass("active"),(o<p||o>m)&&O.addClass("disabled"),o==p&&O.slice(0,f).addClass("disabled"),o==m&&O.slice(y+1).addClass("disabled"),x="",o=parseInt(o/10,10)*10;var j=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var A=-1;A<11;A++)x+='<span class="year'+(A==-1?" old":A==10?" new":"")+(C==o?" active":"")+(o<p||o>m?" disabled":"")+'">'+o+"</span>",o+=1;j.html(x)},updateNavArrows:function(){if(this._allow_update){var r=new Date(this.viewDate),o=r.getUTCFullYear(),h=r.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&o<=this.o.startDate.getUTCFullYear()&&h<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&o>=this.o.endDate.getUTCFullYear()&&h>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-1/0&&o<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&o>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break}}},click:function(r){r.preventDefault();var o=e(r.target).closest("span, td, th");if(o.length==1)switch(o[0].nodeName.toLowerCase()){case"th":switch(o[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=w.modes[this.viewMode].navStep*(o[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h);break}this.fill();break;case"today":var p=new Date;p=n(p.getFullYear(),p.getMonth(),p.getDate(),0,0,0),this.showMode(-2);var f=this.o.todayBtn=="linked"?null:"view";this._setDate(p,f);break;case"clear":var m;this.isInput?m=this.element:this.component&&(m=this.element.find("input")),m&&m.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide();break}break;case"span":if(!o.is(".disabled")){if(this.viewDate.setUTCDate(1),o.is(".month")){var y=1,d=o.parent().find("span").index(o),g=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(d),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(n(g,d,y,0,0,0,0))}else{var g=parseInt(o.text(),10)||0,y=1,d=0;this.viewDate.setUTCFullYear(g),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(n(g,d,y,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(o.is(".day")&&!o.is(".disabled")){var y=parseInt(o.text(),10)||1,g=this.viewDate.getUTCFullYear(),d=this.viewDate.getUTCMonth();o.is(".old")?d===0?(d=11,g-=1):d-=1:o.is(".new")&&(d==11?(d=0,g+=1):d+=1),this._setDate(n(g,d,y,0,0,0,0))}break}},_setDate:function(r,o){(!o||o=="date")&&(this.date=new Date(r)),(!o||o=="view")&&(this.viewDate=new Date(r)),this.fill(),this.setValue(),this._trigger("changeDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&(h.change(),this.o.autoclose&&(!o||o=="date")&&this.hide())},moveMonth:function(r,o){if(!o)return r;var h=new Date(r.valueOf()),p=h.getUTCDate(),f=h.getUTCMonth(),m=Math.abs(o),y,d;if(o=o>0?1:-1,m==1)d=o==-1?function(){return h.getUTCMonth()==f}:function(){return h.getUTCMonth()!=y},y=f+o,h.setUTCMonth(y),(y<0||y>11)&&(y=(y+12)%12);else{for(var g=0;g<m;g++)h=this.moveMonth(h,o);y=h.getUTCMonth(),h.setUTCDate(p),d=function(){return y!=h.getUTCMonth()}}for(;d();)h.setUTCDate(--p),h.setUTCMonth(y);return h},moveYear:function(r,o){return this.moveMonth(r,o*12)},dateWithinRange:function(r){return r>=this.o.startDate&&r<=this.o.endDate},keydown:function(r){if(this.picker.is(":not(:visible)")){r.keyCode==27&&this.show();return}var o=!1,h,p,f;switch(r.keyCode){case 27:this.hide(),r.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;h=r.keyCode==37?-1:1,r.ctrlKey?(p=this.moveYear(this.date,h),f=this.moveYear(this.viewDate,h)):r.shiftKey?(p=this.moveMonth(this.date,h),f=this.moveMonth(this.viewDate,h)):(p=new Date(this.date),p.setUTCDate(this.date.getUTCDate()+h),f=new Date(this.viewDate),f.setUTCDate(this.viewDate.getUTCDate()+h)),this.dateWithinRange(p)&&(this.date=p,this.viewDate=f,this.setValue(),this.update(),r.preventDefault(),o=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;h=r.keyCode==38?-1:1,r.ctrlKey?(p=this.moveYear(this.date,h),f=this.moveYear(this.viewDate,h)):r.shiftKey?(p=this.moveMonth(this.date,h),f=this.moveMonth(this.viewDate,h)):(p=new Date(this.date),p.setUTCDate(this.date.getUTCDate()+h*7),f=new Date(this.viewDate),f.setUTCDate(this.viewDate.getUTCDate()+h*7)),this.dateWithinRange(p)&&(this.date=p,this.viewDate=f,this.setValue(),this.update(),r.preventDefault(),o=!0);break;case 13:this.hide(),r.preventDefault();break;case 9:this.hide();break}if(o){this._trigger("changeDate");var m;this.isInput?m=this.element:this.component&&(m=this.element.find("input")),m&&m.change()}},showMode:function(r){r&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+r))),this.picker.find(">div").hide().filter(".datepicker-"+w.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var i=function(r,o){this.element=e(r),this.inputs=e.map(o.inputs,function(h){return h.jquery?h[0]:h}),delete o.inputs,e(this.inputs).datepicker(o).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(h){return e(h).data("datepicker")}),this.updateDates()};i.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(r){return r.date}),this.updateRanges()},updateRanges:function(){var r=e.map(this.dates,function(o){return o.valueOf()});e.each(this.pickers,function(o,h){h.setRange(r)})},dateUpdated:function(r){var o=e(r.target).data("datepicker"),h=o.getUTCDate(),p=e.inArray(r.target,this.inputs),f=this.inputs.length;if(p!=-1){if(h<this.dates[p])for(;p>=0&&h<this.dates[p];)this.pickers[p--].setUTCDate(h);else if(h>this.dates[p])for(;p<f&&h>this.dates[p];)this.pickers[p++].setUTCDate(h);this.updateDates()}},remove:function(){e.map(this.pickers,function(r){r.remove()}),delete this.element.data().datepicker}};function s(r,y){var h=e(r).data(),p={},f,m=new RegExp("^"+y.toLowerCase()+"([A-Z])"),y=new RegExp("^"+y.toLowerCase());for(var d in h)y.test(d)&&(f=d.replace(m,function(g,T){return T.toLowerCase()}),p[f]=h[d]);return p}function a(r){var o={};if(!(!v[r]&&(r=r.split("-")[0],!v[r]))){var h=v[r];return e.each(b,function(p,f){f in h&&(o[f]=h[f])}),o}}var l=e.fn.datepicker,u=e.fn.datepicker=function(r){var o=Array.apply(null,arguments);o.shift();var h;return this.each(function(){var p=e(this),f=p.data("datepicker"),m=typeof r=="object"&&r;if(!f){var y=s(this,"date"),d=e.extend({},c,y,m),g=a(d.language),T=e.extend({},c,g,y,m);if(p.is(".input-daterange")||T.inputs){var k={inputs:T.inputs||p.find("input").toArray()};p.data("datepicker",f=new i(this,e.extend(T,k)))}else p.data("datepicker",f=new t(this,T))}if(typeof r=="string"&&typeof f[r]=="function"&&(h=f[r].apply(f,o),h!==void 0))return!1}),h!==void 0?h:this},c=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},b=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=t;var v=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},w={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(r){return r%4===0&&r%100!==0||r%400===0},getDaysInMonth:function(r,o){return[31,w.isLeapYear(r)?29:28,31,30,31,30,31,31,30,31,30,31][o]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(r){var o=r.replace(this.validParts,"\0").split("\0"),h=r.match(this.validParts);if(!o||!o.length||!h||h.length===0)throw new Error("Invalid date format.");return{separators:o,parts:h}},parseDate:function(d,o,h){if(d instanceof Date)return d;if(typeof o=="string"&&(o=w.parseFormat(o)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(d)){var p=/([\-+]\d+)([dmwy])/,y=d.match(/([\-+]\d+)([dmwy])/g),U,f;d=new Date;for(var m=0;m<y.length;m++)switch(U=p.exec(y[m]),f=parseInt(U[1]),U[2]){case"d":d.setUTCDate(d.getUTCDate()+f);break;case"m":d=t.prototype.moveMonth.call(t.prototype,d,f);break;case"w":d.setUTCDate(d.getUTCDate()+f*7);break;case"y":d=t.prototype.moveYear.call(t.prototype,d,f);break}return n(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,0)}var y=d&&d.match(this.nonpunctuation)||[],d=new Date,g={},T=["yyyy","yy","M","MM","m","mm","d","dd"],k={yyyy:function(D,C){return D.setUTCFullYear(C)},yy:function(D,C){return D.setUTCFullYear(2e3+C)},m:function(D,C){for(C-=1;C<0;)C+=12;for(C%=12,D.setUTCMonth(C);D.getUTCMonth()!=C;)D.setUTCDate(D.getUTCDate()-1);return D},d:function(D,C){return D.setUTCDate(C)}},x,M,U;k.M=k.MM=k.mm=k.m,k.dd=k.d,d=n(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);var F=o.parts.slice();if(y.length!=F.length&&(F=e(F).filter(function(D,C){return e.inArray(C,T)!==-1}).toArray()),y.length==F.length){for(var m=0,S=F.length;m<S;m++){if(x=parseInt(y[m],10),U=F[m],isNaN(x))switch(U){case"MM":M=e(v[h].months).filter(function(){var C=this.slice(0,y[m].length),O=y[m].slice(0,C.length);return C==O}),x=e.inArray(M[0],v[h].months)+1;break;case"M":M=e(v[h].monthsShort).filter(function(){var C=this.slice(0,y[m].length),O=y[m].slice(0,C.length);return C==O}),x=e.inArray(M[0],v[h].monthsShort)+1;break}g[U]=x}for(var m=0,_;m<T.length;m++)_=T[m],_ in g&&!isNaN(g[_])&&k[_](d,g[_])}return d},formatDate:function(f,o,h){typeof o=="string"&&(o=w.parseFormat(o));var p={d:f.getUTCDate(),D:v[h].daysShort[f.getUTCDay()],DD:v[h].days[f.getUTCDay()],m:f.getUTCMonth()+1,M:v[h].monthsShort[f.getUTCMonth()],MM:v[h].months[f.getUTCMonth()],yy:f.getUTCFullYear().toString().substring(2),yyyy:f.getUTCFullYear()};p.dd=(p.d<10?"0":"")+p.d,p.mm=(p.m<10?"0":"")+p.m;for(var f=[],m=e.extend([],o.separators),y=0,d=o.parts.length;y<=d;y++)m.length&&f.push(m.shift()),f.push(p[o.parts[y]]);return f.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};w.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+w.headTemplate+"<tbody></tbody>"+w.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+w.headTemplate+w.contTemplate+w.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+w.headTemplate+w.contTemplate+w.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=w,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=l,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(r){var o=e(this);o.data("datepicker")||(r.preventDefault(),u.call(o,"show"))}),e(function(){u.call(e('[data-provide="datepicker-inline"]'))})})(window.jQuery);(function(e){e.fn.bdatepicker=e.fn.datepicker.noConflict(),e.fn.datepicker||(e.fn.datepicker=e.fn.bdatepicker);var n=function(t){this.init("date",t,n.defaults),this.initPicker(t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format),t.datepicker=e.fn.editableutils.tryParseJson(t.datepicker,!0),this.options.datepicker=e.extend({},i.datepicker,t.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=e.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var s=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";n.superclass.value2html.call(this,s,i)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(t){if(!(e(t.currentTarget).is(".old")||e(t.currentTarget).is(".new"))){var i=e(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(t,i){var s=null,a;return t&&(s=this.dpg.parseDate(t,i,this.options.datepicker.language),typeof t=="string"&&(a=this.dpg.formatDate(s,i,this.options.datepicker.language),t!==a&&(s=null))),s}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),e.fn.editabletypes.date=n})(window.jQuery);(function(e){var n=function(t){this.init("datefield",t,n.defaults),this.initPicker(t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.date),e.extend(n.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),n.defaults=e.extend({},e.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),e.fn.editabletypes.datefield=n})(window.jQuery);(function(e){var n=function(t){this.init("datetime",t,n.defaults),this.initPicker(t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.abstractinput),e.extend(n.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format),t.datetimepicker=e.fn.editableutils.tryParseJson(t.datetimepicker,!0),this.options.datetimepicker=e.extend({},i.datetimepicker,t.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=e.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(t){var i=e(this).closest("form").parent();setTimeout(function(){i.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var s=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(i)n.superclass.value2html.call(this,s,i);else return s},html2value:function(t){var i=this.parseDate(t,this.parsedViewFormat);return i?this.fromUTC(i):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var i=this.parseDate(t,this.parsedFormat);return i?this.fromUTC(i):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(t){var i=e(this).closest("form");setTimeout(function(){i.submit()},200)})},toUTC:function(t){return t&&new Date(t.valueOf()-t.getTimezoneOffset()*6e4)},fromUTC:function(t){return t&&new Date(t.valueOf()+t.getTimezoneOffset()*6e4)},parseDate:function(t,i){var s=null,a;return t&&(s=this.dpg.parseDate(t,i,this.options.datetimepicker.language,this.options.formatType),typeof t=="string"&&(a=this.dpg.formatDate(s,i,this.options.datetimepicker.language,this.options.formatType),t!==a&&(s=null))),s}}),n.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),e.fn.editabletypes.datetime=n})(window.jQuery);(function(e){var n=function(t){this.init("datetimefield",t,n.defaults),this.initPicker(t,n.defaults)};e.fn.editableutils.inherit(n,e.fn.editabletypes.datetime),e.extend(n.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),n.defaults=e.extend({},e.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),e.fn.editabletypes.datetimefield=n})(window.jQuery);
